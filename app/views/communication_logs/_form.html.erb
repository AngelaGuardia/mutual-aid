<%= simple_form_for @communication_log do |f| %>
  <%= f.error_notification %>

  <div class="form-inputs">
    <%= f.association :person %>
    <%= f.association :match, label: "Re: Match" %>

    <div class="field is-grouped">
      <%= f.input :sent_at, label: "Time sent/received", default: Time.now, required: true %>
      <%= f.input :outbound, as: :radio_buttons, checked: true %>
    </div>

    <div class="field is-grouped">
      <%= f.association :delivery_method, required: true, collection: ContactMethod.all %>
      <%= f.input :delivery_status, as: :select, required: true, collection: CommunicationLog::DELIVERY_STATUSES %>
      <%= f.input :needs_follow_up, as: :radio_buttons %>
    </div>

    <%= f.input :subject, as: :text, input_html: { rows: 1 } %>

    <hr>
    <% if f.object.persisted? && f.object.delivery_method&.name == ContactMethod.autoemail(true).sample.name %>
      <%= f.label :body, class: "label" %>
      <%= f.object.body&.html_safe || "-- Empty --" %>
    <% else %>
      <%= f.input :body, as: :text, input_html: { rows: 3 } %>
    <% end %>
  </div>

  <%= render "layouts/view_footer_buttons", f: f, resource: @communication_log, top_divider: true, extra_form_button_1: nil, extra_form_button_2: nil %>
<% end %>
